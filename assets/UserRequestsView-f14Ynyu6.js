import{T as B}from"./TheHeader-ztNZRtdJ.js";import{_ as D}from"./BaseButton.vue_vue_type_script_setup_true_lang-BVpjQWTa.js";import{d as U,r as p,a as M,c as E,b as m,e as a,f as l,u as s,F as g,g as I,w as c,h as N,o as n,i as b,j as O,k,l as q}from"./index-ZZ5Ad1gM.js";import{u as z,_ as A}from"./parcelStore-CXdca0UY.js";import{u as F,a as P,_ as y,b as j}from"./BaseDatePicker.vue_vue_type_script_setup_true_lang-BnLWbi2d.js";import{B as w,a as H}from"./BaseTextarea-oTZ4KgD2.js";const L={class:"d-flex flex-column h-100 w-100"},Y={class:"d-flex align-items-center flex-grow-1 my-3 pe-3 overflow-y-auto","data-simplebar":""},G={key:0},J={key:1,class:"mt-4 text-center"},K=a("br",null,null,-1),oe=U({__name:"UserRequestsView",setup(Q){const x=window.history.length,v=N(),i=p(!1),d=p(!1);let o=M({id:"",dispatchDate:0,description:"",originCity:"",targetCity:"",parcelType:"",type:"",creatorId:"",creationDate:0});const f=p("by creation date"),R=p(["by sending date","by creation date"]),V=F(),T=z(),u=P(),C=E(()=>u.sortedRequests(f.value).filter(r=>r.creatorId===v.params.userId)),_=()=>{console.log(),u.updateRequest(o),i.value=!1},S=()=>{u.deleteRequest(o.id),d.value=!1},$=r=>{d.value=!0,o.id=r},h=r=>{i.value=!0,o=u.currentRequest(r)};return(r,e)=>(n(),m(g,null,[a("div",L,[l(B,{title:"All your request","is-nav":!!s(x)},null,8,["is-nav"]),l(y,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),"custom-label-class":"me-2",label:"sort:",class:"d-flex align-items-center mt-4",options:R.value},null,8,["modelValue","options"]),a("div",Y,[C.value.length?(n(),m("div",G,[(n(!0),m(g,null,I(C.value,t=>(n(),b(A,{key:t.id,request:t,onDelete:$,onEdit:h},null,8,["request"]))),128))])):(n(),m("div",J,"There are no requests yet ðŸ˜¢"))]),l(D,{class:"mx-auto",title:"Create new request",onClick:e[1]||(e[1]=t=>s(O).push(`/${s(v).params.userId}/create`))})]),l(w,{"is-modal-open":i.value,size:"md",onClose:e[8]||(e[8]=t=>i.value=!1)},{body:c(()=>[a("form",null,[l(y,{modelValue:s(o).originCity,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).originCity=t),label:"Select the city from which the parcel is sent",class:"mt-4",options:s(V).cities},null,8,["modelValue","options"]),l(y,{modelValue:s(o).targetCity,"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).targetCity=t),label:"Select the city to which the parcel is sent",class:"mt-4",options:s(V).cities},null,8,["modelValue","options"]),s(o).type=="order"?(n(),b(y,{key:0,modelValue:s(o).parcelType,"onUpdate:modelValue":e[4]||(e[4]=t=>s(o).parcelType=t),label:"Type of parcel",class:"mt-4",options:s(T).parcelTypes},null,8,["modelValue","options"])):k("",!0),l(j,{modelValue:s(o).dispatchDate,"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).dispatchDate=t),label:"Date of dispatch",class:"create-delivery__datepicker mt-4","picked-data":s(o).parcelType},null,8,["modelValue","picked-data"]),s(o).type=="order"?(n(),b(H,{key:1,modelValue:s(o).description,"onUpdate:modelValue":e[6]||(e[6]=t=>s(o).description=t),label:"Parcel description",placeholder:"laptop",class:"mt-4"},null,8,["modelValue"])):k("",!0)])]),footer:c(()=>[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[7]||(e[7]=t=>i.value=!1)}," Close "),a("button",{type:"button",class:"btn btn-primary",onClick:_},"Save changes")]),_:1},8,["is-modal-open"]),l(w,{"is-modal-open":d.value,size:"md",onClose:e[10]||(e[10]=t=>d.value=!1)},{body:c(()=>[q(" Are you sure "),K,q(" You want to delelte this erquest? ")]),footer:c(()=>[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[9]||(e[9]=t=>d.value=!1)}," Close "),a("button",{type:"button",class:"btn btn-danger",onClick:S},"delete")]),_:1},8,["is-modal-open"])],64))}});export{oe as default};
